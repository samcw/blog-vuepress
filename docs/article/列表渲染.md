---
title: Vue列表渲染
category: Vue
description: 我们可以用 v-for 指令基于一个数组来渲染一个列表。v-for 指令需要使用 item in items 形式的特殊语法，其中 items 是源数据数组，而 item 则是被迭代的数组元素的别名。
time: 2020-03-10
---
### v-for
1. 其用法，跟angularjs相似。
### 维护状态
1. 建议尽可能在使用 v-for 时提供 key attribute，除非遍历输出的 DOM 内容非常简单，或者是刻意依赖默认行为以获取性能上的提升。
### 数组更新检测
1. 由于 JavaScript 的限制，Vue不能检测以下数组的变动：（1）当你利用索引直接设置一个数组项时，例如：`vm.items[indexOfItem]=newValue`。（2）当你修改数组的长度时，例如：`vm.items.length = newLength`
2. 第一类问题的解决方法：
```js
// Vue.set
Vue.set(vm.items, indexOfItem, newValue)
// Array.prototype.splice
vm.items.splice(indexOfItem, 1, newValue)
vm.$set(vm.items, indexOfItem, newValue)
```
3. 第二类问题的解决方法：
```js
vm.items.splice(newLength)
```
### 显示过滤/排序后的结果
1. 有时，我们想要显示一个数组经过过滤或排序后的版本，而不实际改变或重置原始数据。在这种情况下，可以创建一个计算属性，来返回过滤或排序后的数组。
```js
<li v-for="n in evenNumbers">{{ n }}</li>

data: {
  numbers: [ 1, 2, 3, 4, 5 ]
},
computed: {
  evenNumbers: function () {
    return this.numbers.filter(function (number) {
      return number % 2 === 0
    })
  }
}
```
### v-for与v-if一起使用
1. `v-for`优先级更高，会先遍历渲染，在决定是否保留或删除。用于类似to-do。
```js
<li v-for="todo in todos" v-if="!todo.isComplete">
  {{ todo }}
</li>
```
2. 建议使用`v-for`的同时，为结点设置`key`属性。



